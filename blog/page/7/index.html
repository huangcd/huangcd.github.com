
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>流水笔记</title>
  <meta name="author" content="huangcd">

  
  <meta name="description" content="1
2
3
4
5
6
今天都在看Webkit源码，总结一下：&lt;br>
核心的两部分应该是WebCore和JavascriptCore，大致上来说，WebCore负责HTML和CSS及图片等资源的解 析，JavascriptCore负责Javascript脚本的解析和执行。 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://huangcd.github.com/blog/page/7/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="流水笔记" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-33586871-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">流水笔记</a></h1>
  
    <h2>面向免费零食和饮料的编程</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:huangcd.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/04/28/2010-4-28-webkit/">2010.4.28 Webkit</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-28T00:00:00+08:00" pubdate data-updated="true">Apr 28<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content">

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>今天都在看Webkit源码，总结一下：&lt;br>
</span><span class='line'>核心的两部分应该是WebCore和JavascriptCore，大致上来说，WebCore负责HTML和CSS及图片等资源的解 析，JavascriptCore负责Javascript脚本的解析和执行。JavascriptCore还没看，主要是看了WebCore部分。&lt;br>
</span><span class='line'>WebCore既然叫Core，其实就只有很Core的东西，也就是很单纯的解析。至于说如何获取数据，如何把页面显示出来，甚至如何处理与用户之间的交 互等功能就不是它来做的，而是让一些不那么Core的模块来做。而且这些模块都是平台相关的，win下有win下的实现，qt下有qt下的实现，gtk下 有gtk下的实现。又或者说其实Webkit并不是浏览器，而仅仅是一个引擎。&lt;br>
</span><span class='line'>浏览器的一个经典应用场景是用户给出一个URL（直接输入或者点击链接或者JavaScript解析等方式）。然后浏览器外壳调用FrameLoader 来装载页面。FrameLoader首先检查一些条件(policyCheck())，如URL是否非空、URL是否可达，用户是否取消等等。然后通过 DocumentLoader启动一个MainResourceLoader来装载页面。&lt;br>
</span><span class='line'>MainResource调用network模块中的接口来下载页面内容（ResourceHandle），实际上这里的Resourcehandle已 经是平台相关的内容了，比如在Qt里面，会有ResourceHandleQt来控制，然后调用QtNetworkReplyHandler来处理 HTTP请求（GET， POST等）。接收到数据以后，会有回调函数，告诉MainResourceLoader数据已经接收到了。然后一路返回到FrameLoader开始调 用HTMLTokenizer解析HTML文本。解析过程中，如果遇到Javascript脚本的话，也会调用Javascript引擎（Webkit中 的JavascriptCore，chrome中的V8）来解析。数据被解析完了以后，成了一个一个的node。然后通过 FrameLoaderClient调用外部的壳把内容显示出来。
</span><span class='line'>。。。好像什么都没说清楚。。。</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/04/27/2010-4-27-plc-xi-xiang-gu-piao/">2010.4.27 PLC、西厢、股票</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-27T00:00:00+08:00" pubdate data-updated="true">Apr 27<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>果然没有理论的支持还是做不成事情的，今天看了一下PLC的书，恍然大悟豁然开朗，很多疑问迎刃而解。
首先PLC有一种很奇怪的执行方式，就是主程序块（OB1）并不是只执行一次，而是以一个恒定的间隔循环执行，这就解释了为什么CtrlValve里面DB101到DB110所有数据块里面的内容都是相同的，原来那只是个初始值。
然后PIW之类的P是有深意的，它表示直接读取当前的信号（<strong>而不是在程序块执行之间保存到影像寄存器里面的值</strong>）。
然后累加器AC呢，S7-300只有两个（ACCU0，ACCU1），而S7-200和S7-400都有4个（ACCU0～ACCU3）。
然后对于一条指令，是一种操作码+操作数的形式，操作码自然就是L，A，=，==I之类的东西了。但操作数还是很有讲究的，可以有地址和数据两种方式。而地址又分为两种，一种是绝对地址（Memory Address），另一种是<strong>符号地址（Symbol Address）</strong>（符号地址还没看，据说在书中12～13章有详细介绍）。绝对地址呢，又分为直接寻址和间接寻址两种方式，直接寻址就是类似“I3.0”这样的形式，就是I区中第3个字节第0位了。间接寻址又很有讲究，比如S7-200中就跟C语言差不多，有&amp;和*两种符号，自然就是<strong>取地址</strong>和<strong>取当前地址对应的值作为地址对应的值</strong>（。。。反正就是那个意思了）。S7-300/400就简单很多了，可以用I[I10]之类的，意思就是把I10的值拿出来（比如是20），然后取I20的值。书里有个例子，是说</p>

<p>[code]
L    P#22.2
T    LD10
A    I[LD10]
A    I0.0
=    Q0.1
[/code]</p>

<p>看起来好像很复杂很牛的样子，其实就是</p>

<p>[code]
A    I22.2
A    I0.0
=    Q0.1
[/code]</p>

<p>的意思。
然后还有S7-300/400寄存器间接寻址的内容也没看。
然后今天跟万师兄谈了一下，发现某PLC系统结构非常清晰，没有整理的必要，于是现在任务暂时变成全方位理解CtrlValve的代码。貌似这160行的代码基本上就够我整个研究生论文了。。。</p>

<p>然后今天收到一封邮件，说是西厢计划比较好用的版本出来了，于是下了下来，装上张生，还是很不错的，至少twitter、facebook等等都能正常访问，wordPress虽然慢了一点，但也还能忍。恩，西厢还是很牛的一个东西。</p>

<p>然后今天股票很悲剧，操作失误把国航全卖了，然后南航差2分没买上（结果彪了6个点）。啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/04/26/2010-4-26-plc-webkit-she-dang-kao-shi/">2010.4.26 PLC、WebKit、社当考试</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-26T00:00:00+08:00" pubdate data-updated="true">Apr 26<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>首先详细分析一下SIMATIC 300(1)的代码（不写点东西的话总容易分神。。。）
显然是先从OB1开始的了，OB1就是俗称的&#8221;Main Program Sweep (Cycle)&#8221;
首先Call的是StationSendPC函数，也就是FC13（内含DB2&#8211;PCRev），学名是</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>” 从站设备原始数据传入DB2“</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>” 从站设备原始数据传入DB2“</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>” 从站设备原始数据传入DB2“</span></code></pre></td></tr></table></div></figure>


<p>[code]
AN I 16.0
= DBX 144.0
[/code]</p>

<p>的结构，<strong>但AN是和上一个RLO and not，似乎就是每一个AN都是和上一个类似代码段的RLO and not一下，也就是说结果是逐个依赖的样子（我说的是什么呢？？？）</strong>。
(号外——补充一个注释：LAR1 P#M100.0 //Load AR1 with a 32-bit pointer constant.)
然后是泵运行状态，代码如下：</p>

<p>[code]
L P#20.0 //取基址
LAR1
L P#162.0
LAR2
L 11
Lop1: NOP 0
T #TmpNum
A I [AR1,P#0.0]
= DBX [AR2,P#0.0]
AN I [AR1,P#0.0]
= DBX [AR2,P#0.1]
+AR1 P#0.2 //输入间隔2
+AR2 P#1.0 //数据块间隔1字节
L #TmpNum
LOOP Lop1
[/code]</p>

<p>好吧，其实我<em><strong>没看懂</strong></em>，所以直接贴上来。。。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>” 从站设备原始数据传入DB2“</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>” 从站设备原始数据传入DB2“</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>” 从站设备原始数据传入DB2“</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>” 从站设备原始数据传入DB2“</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;div class='bogus-wrapper'>&lt;notextile>&lt;figure class='code'>&lt;div class="highlight">&lt;table>&lt;tr>&lt;td class="gutter">&lt;pre class="line-numbers">&lt;span class='line-number'>1&lt;/span>
</span><span class='line'>&lt;/pre>&lt;/td>&lt;td class='code'>&lt;pre>&lt;code class=''>&lt;span class='line'>” 从站设备原始数据传入DB2“&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>&lt;/div>&lt;/figure>&lt;/notextile>&lt;/div></span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>” 从站设备原始数据传入DB2“</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>” 从站设备原始数据传入DB2“</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>” 从站设备原始数据传入DB2“</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>” 从站设备原始数据传入DB2“</span></code></pre></td></tr></table></div></figure>


<p>Web Template Framework, 它provides commonly used functions all over the WebKit codebase.
然后检查发现FrameLoader似乎是整个WebCore的入口，外壳（GTK、QT、Chrome等等）就是调用FrameLoader来载入网页 的，然后FrameLoader目前有一个问题，就是载入网页的时候需要一个外壳（这依赖太纠结了。。。），FrameLoader有几个看起来很 kernel的函数，首先是createWindows，就是新建一个窗口（标签页）的时候调用的吧。然后是各种load，就是载入URL了。</p>

<p>暂时就看了这么多。。。</p>

<p>下午考试，社会主义与当代中国，太纠结了。10道论述题，每道题都是写着歇着突然发现“咦，好像问的不是这个”，怎么办？划掉重写？太浪费时间了。。。试 图转回来？要能转回来就不会写错了。。。然后就像“算了，反正老师未必会看，看了也未必知道我在说什么，知道也可能会同情我写了那么多字”，反正大概应该 可能也许不会挂就是了，然后就开始写下一题了。</p>

<p>晚上突然发现最近几周都忘了下Mentalist，我就说怎么总觉得少看了一部美剧，但具体有想不起来，Lie To Me已经停播，Chuck好像出的话基本都下了，然后今天终于想起是Mentalist，一搜，居然差3集没看，真是哇哈哈哈哈哈哈哈哈哈哈哈</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>” 从站设备原始数据传入DB2“</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>” 从站设备原始数据传入DB2“</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/04/25/xin-de-she-zhi-ce-shi/">新的设置测试</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-25T00:00:00+08:00" pubdate data-updated="true">Apr 25<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>新版搜狗浏览器虽然加入了不少东西，但外观实在太山寨了。。。</p>

<p>联想的乐phone也是，虽然功能似乎不错，但UI怎么看怎么山寨</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/04/24/2010-4-24-plc-ji-ju-can-ji-man-lian/">2010.4.24 PLC及聚餐及曼联</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-24T00:00:00+08:00" pubdate data-updated="true">Apr 24<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>历经千辛万苦，终于把SIMATIC（为什么那么像赛门铁克呢？？？）里面的源码弄出来了。不得不说 Vim除了适合显摆以外，功能还是异常强大的，尽管现在还只是略懂，不过已经足以完成大部分文本处理的任务了。遗憾的是:%s/{pattern} /{substring}/g全局替换似乎不能用中文（<strong>或者更准确的说，VIM在命令状态下不能输入中文，有机会要尝试解决一下</strong>）。</p>

<p>继续补充昨天内容：</p>

<ul>
<li>PI原来是Process Input的意思（ABB变频器和S7-300DP通讯里面说到——《设计文档（简略）》，PS.似乎找不到传说中的SFC15，只有SFC20和 SFC14）。因此据猜测，PIW应该是Process Input Word的意思了吧。</li>
    <li>还有什么DBX 145.0这样的东西就是对应于当前打开的那个DB（OPN XXX中的XXX）中的第145.0（实际上应该就是145个位）。因为在《设计文档（简略）》中有这么一句</li>
</ul>


<p>[code]
RECORD :=P#DB20.DBX 6.0 BYTE 6
[/code]</p>

<p>说的似乎是从DB20中第6位开始读6个BYTE</p>

<ul>
<li>OB其实是Organization Block的意思。</li>
    <li>DB自然就是Data Block了</li>
    <li>FC指的是Function</li>
    <li>FB是Function Block（跟FC有什么区别呢？？？）</li>
    <li>SFC是System Function</li>
    <li>VAT是Variable Table，储存各种各样的变量。如下图（程序中各种各样的&#8221;PCSend&#8221;.PCSend[2]）这种要你命三 千的含义都能从这里查到（说起来，DBX是不是任意位数呢？类似DBW、DBB）<a href="http://huangcd.files.wordpress.com/2010/04/2010-4-24-plce58f8ae8819ae9a490e58f8ae69bbce88194.png"><img class="alignnone size-full wp-image-10" title="2010 4 24 plce58f8ae8819ae9a490e58f8ae69bbce88194" src="http://huangcd.files.wordpress.com/2010/04/2010-4-24-plce58f8ae8819ae9a490e58f8ae69bbce88194.png" alt="" width="401" height="401"></a>
</li>
</ul>


<p>另外赞一下VirtualBox的无缝模式，个人感觉完胜VirtualPC（没用过。。。）、VMWare（没用过最新版。。。）两个收费版</p>

<p>中午聚餐，计有LMY、LHD、XQ、LZJ、CKY、LWJ和我共七人于江湖味道（为什么二楼看起来挺高雅的，一楼却怎么看都像大排档呢，搞到我被大家 狂喷），价格便宜量又足，还是不错的。席间爆料说我曾经发过暧昧短信。。。我怎么不记得了
席间诸位工作了的同仁都无甚八卦热情，更多的是讨论租房等现实问题。我和LZJ两位烟酒僧对角默坐，无言以对，很是悲凉。</p>

<p>晚上突然发现新浪有曼联直播，还是曼联VS热刺这种重头戏，显然是要看的。不过新浪视频居然只支持IE，只支持IE也就忍了，居然一开就把带宽全占了，网 都上不了。不过尽管如此，我还是排除万难，坚持看完全场，并在看直播过程中成功吧SIMATIC代码导出来。
鉴于曼联赢了，心情甚好，点评一下：</p>

<ol>
<li>潇洒哥真不潇洒</li>
    <li>小马哥很牛，上场就来个助攻，虽然只是捣了个脚</li>
    <li>nani似乎没以前那么喜欢突突突了，表现还是可以的</li>
    <li>Bale真牛，曼联当年没搞到手浪费了</li>
    <li>王老吉同志很好，梅开二度</li>
    <li>卡里克挺好的一个同志，怎么就成隐身卡了。。。</li>
    <li>鲁小胖的小孩感觉怎么那么胖呢</li>
    <li>他池为了马竞，似乎不会给面子了</li>
</ol>


<p>OVER，开始看片</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/04/23/grep-bang-zhu/">Grep帮助</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-23T00:00:00+08:00" pubdate data-updated="true">Apr 23<span>rd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Usage: grep [OPTION]&#8230; PATTERN [FILE] &#8230;
Search for PATTERN in each FILE or standard input.
Example: grep -i &#8216;hello world&#8217; menu.h main.c</p>

<p>Regexp selection and interpretation:
-E, &#8211;extended-regexp PATTERN is an extended regular expression
-F, &#8211;fixed-strings PATTERN is a set of newline-separated strings
-G, &#8211;basic-regexp PATTERN is a basic regular expression
-P, &#8211;perl-regexp PATTERN is a Perl regular expression
-e, &#8211;regexp=PATTERN use PATTERN as a regular expression
-f, &#8211;file=FILE obtain PATTERN from FILE
-i, &#8211;ignore-case ignore case distinctions
-w, &#8211;word-regexp force PATTERN to match only whole words
-x, &#8211;line-regexp force PATTERN to match only whole lines
-z, &#8211;null-data a data line ends in 0 byte, not newline</p>

<p>Miscellaneous:
-s, &#8211;no-messages suppress error messages
-v, &#8211;invert-match select non-matching lines
-V, &#8211;version print version information and exit
&#8211;help display this help and exit
&#8211;mmap use memory-mapped input if possible</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/04/23/2010-4-23-plc/">2010.4.23 PLC</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-23T00:00:00+08:00" pubdate data-updated="true">Apr 23<span>rd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>源码类汇编吧。一句一句看不难懂，不过整体来看不知道什么意思。。。都是读几个数，比较一下/加加减减一下/处理一下，然后存到某个位置
一些程序指令含义（猜测或者从文档中找到）：</p>

<ul>
<li>OPN: open a data block</li>
<li>RND: round(float to int)</li>
<li>A: and</li>
<li>AN: and not（取反以后，再and）</li>
<li>==I: 判断是否相等（前面两个运算结果）</li>
<li>=: 输出（突然想到，这个和T有什么区别呢？）</li>
<li>L: Load</li>
<li>T: Transfer</li>
<li>对于一下PIW、DIW、IB之类的东西，最后一个是B的话表示Byte，D的话表示Double，W的话表示Word，（中间I表示 Input？？）</li>
<li>#开头的表示临时变量吧（不在寄存器或者什么里面）？</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/03/26/python-chuang-jian-tou-ming-png-tu-pian/">Python创建透明PNG图片</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-03-26T00:00:00+08:00" pubdate data-updated="true">Mar 26<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>有两点需要注意的，一个是图片只有在保存成PNG格式之后 才会透明，另一个是颜色只能用&#8221;#FF00FF&#8221;这种格式，而不能用0XFF00FF（即只能 是字符串，否则不透明，很诡异）</p>

<p>1 import Image, ImageFont, ImageDraw
2
3 im = Image.new(&#8216;RGBA&#8217;, (120, 50), (0, 0, 0, 0))
4 dr = ImageDraw.Draw(im)
5 font = ImageFont.truetype(&#8216;MONACO.TTF&#8217;, 30)
6 dr.text((10, 10), &#8216;hello&#8217;, font = font, fill = &#8216;#00FF00&#8217;)
7 im.save(&#8216;test.png&#8217;, &#8216;PNG&#8217;)</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/6/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
 <h1>Categories</h1>
 <ul id="categories">
 <li class='category'><a href='/blog/categories/csharp/'>Csharp (2)</a></li>
<li class='category'><a href='/blog/categories/haskell/'>Haskell (3)</a></li>
<li class='category'><a href='/blog/categories/java/'>Java (2)</a></li>
<li class='category'><a href='/blog/categories/linq/'>LINQ (1)</a></li>
<li class='category'><a href='/blog/categories/lego/'>Lego (1)</a></li>
<li class='category'><a href='/blog/categories/octopress/'>Octopress (1)</a></li>
<li class='category'><a href='/blog/categories/plc/'>PLC (3)</a></li>
<li class='category'><a href='/blog/categories/programming/'>Programming (5)</a></li>
<li class='category'><a href='/blog/categories/python/'>Python (14)</a></li>
<li class='category'><a href='/blog/categories/ubuntu/'>Ubuntu (7)</a></li>
<li class='category'><a href='/blog/categories/vim/'>Vim (2)</a></li>
<li class='category'><a href='/blog/categories/webkit/'>Webkit (3)</a></li>
<li class='category'><a href='/blog/categories/awk/'>awk (1)</a></li>
<li class='category'><a href='/blog/categories/blog/'>blog (1)</a></li>
<li class='category'><a href='/blog/categories/functional/'>functional (1)</a></li>
<li class='category'><a href='/blog/categories/github/'>github (1)</a></li>
<li class='category'><a href='/blog/categories/image/'>image (1)</a></li>
<li class='category'><a href='/blog/categories/lambda/'>lambda (1)</a></li>
<li class='category'><a href='/blog/categories/python/'>python (1)</a></li>
<li class='category'><a href='/blog/categories/transparent/'>transparent (1)</a></li>
<li class='category'><a href='/blog/categories/water/'>water (1)</a></li>
<li class='category'><a href='/blog/categories/仙剑/'>仙剑 (5)</a></li>
<li class='category'><a href='/blog/categories/流水笔记/'>流水笔记 (20)</a></li>
<li class='category'><a href='/blog/categories/游戏/'>游戏 (2)</a></li>
<li class='category'><a href='/blog/categories/电影/'>电影 (1)</a></li>

 </ul>
</section><section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/07/25/awk-usage/">Awk 简单应用</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/21/sieve-using-linq/">使用LINQ表达式来求素数</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/19/shi-yong-octopresszai-githubda-jian-bo-ke/">使用Octopress在github搭建博客</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/18/functional-c-number/">函数式C#的尝试</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/12/29/yi-ran-shi-jin-tian-de-shi-qing/">依然是今天的事情</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/huangcd">@huangcd</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'huangcd',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("huangcd", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/huangcd" class="twitter-follow-button" data-show-count="false">Follow @huangcd</a>
  
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/112457374017832727892?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - huangcd -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
